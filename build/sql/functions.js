"use strict";
exports.__esModule = true;
exports.update_monument_rating = exports.update_city_rating = void 0;
var update_monument_rating = "\n    CREATE OR REPLACE FUNCTION update_monument_rating() RETURNS trigger AS\n    $$\n    BEGIN\n        IF (TG_OP = 'INSERT') THEN\n            UPDATE monuments\n            SET number_of_votes = number_of_votes + 1,\n                votes_sum = votes_sum + NEW.rating\n            WHERE id = NEW.fk_monument_id;\n        ELSEIF (TG_OP = 'DELETE') THEN\n            UPDATE monuments\n            SET number_of_votes = number_of_votes - 1,\n                votes_sum = votes_sum - OLD.rating\n            WHERE id = OLD.fk_monument_id;\n        ELSEIF (TG_OP = 'UPDATE') THEN\n            UPDATE monuments\n            SET votes_sum = votes_sum - OLD.rating + NEW.rating\n            WHERE id = OLD.fk_monument_id;\n        END IF;\n        RETURN NEW;\n    END;\n    $$ \n    LANGUAGE PLPGSQL;\n";
exports.update_monument_rating = update_monument_rating;
var update_city_rating = "\n    CREATE OR REPLACE FUNCTION update_city_rating() RETURNS trigger AS\n    $$\n    BEGIN\n        IF (TG_OP = 'DELETE') THEN\n            UPDATE cities\n            SET number_of_votes = number_of_votes - 1,\n                votes_sum = votes_sum - OLD.votes_sum\n            WHERE id = OLD.fk_city_id;\n        ELSEIF (TG_OP = 'UPDATE') THEN\n            UPDATE cities\n            SET votes_sum = votes_sum - OLD.votes_sum + NEW.votes_sum\n            WHERE id = OLD.fk_city_id;\n        END IF;\n        RETURN NEW;\n    END;\n    $$\n    LANGUAGE PLPGSQL;\n";
exports.update_city_rating = update_city_rating;
